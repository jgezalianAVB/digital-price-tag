<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Inventory Table</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    th, td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    input[type="number"] {
      width: 60px;
    }
  </style>
</head>
<body>

<table id="inventoryTable">
  <thead>
    <tr>
      <th>ITEM #</th>
      <th>Type</th>
      <th>Description</th>
      <th>Price</th>
      <th>Current Inv</th>
      <th>Min QTY</th>
      <th>EXT PRICE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>G1-E</td>
      <td>Gateway</td>
      <td>G1-E Gateway</td>
      <td>$477.39</td>
      <td>LIMITED IN STOCK</td>
      <td><input type="number" min="1" value="1"></td>
      <td class="extPrice"></td>
    </tr>
    <tr>
      <td>STAG2 6R</td>
      <td>Label</td>
      <td>2.6” BWR</td>
      <td>$12.63</td>
      <td>LIMITED IN STOCK</td>
      <td><input type="number" min="18" value="18"></td>
      <td class="extPrice"></td>
    </tr>
    <tr>
      <td>STAG4 2R</td>
      <td>Label</td>
      <td>4.2” BWR</td>
      <td>$22.40</td>
      <td>LIMITED IN STOCK</td>
      <td><input type="number" min="6" value="6"></td>
      <td class="extPrice"></td>
    </tr>
    <tr>
      <td>STAG5 8Q</td>
      <td>Label</td>
      <td>5.8” BWRY</td>
      <td>$39.00</td>
      <td>SOLD OUT / ON ORDER</td>
      <td><input type="number" min="10" value="10"></td>
      <td class="extPrice"></td>
    </tr>
    <tr>
      <td>STAG11 6</td>
      <td>Label</td>
      <td>11.6” BWR</td>
      <td>$177.11</td>
      <td>LIMITED IN STOCK</td>
      <td><input type="number" min="5" value="5"></td>
      <td class="extPrice"></td>
    </tr>
    <tr>
      <td>MSR01</td>
      <td>Radar</td>
      <td>Millimeter Wave Radar Sensor (People Counter)</td>
      <td>$90.00</td>
      <td>LIMITED IN STOCK</td>
      <td><input type="number" min="1" value="1"></td>
      <td class="extPrice"></td>
    </tr>

    <tr>
      <td style="visibility: hidden; border: none;">&nbsp;</td>
      <td style="visibility: hidden; border: none;">&nbsp;</td>
      <td style="visibility: hidden; border: none;">&nbsp;</td>
      <td style="visibility: hidden; border: none;">&nbsp;</td>
      <td style="visibility: hidden; border: none;">&nbsp;</td>
      <td><strong>Total</strong></td>
      <td id="total"></td>
    </tr>
  </tbody>
</table>

<script>
  const table = document.getElementById('inventoryTable');

  // Calculate EXT price and enforce min value
  table.addEventListener('input', function(event) {
    if (event.target.type === 'number') {
      const input = event.target;
      const min = parseInt(input.min) || 0;

      // Enforce minimum value
      if (parseInt(input.value) < min) {
        input.value = min;
      }

      const row = input.closest('tr');
      const priceText = row.querySelector('td:nth-child(4)').innerText.replace('$', '');
      const price = parseFloat(priceText) || 0;
      const quantity = parseInt(input.value) || 0;
      const extPriceCell = row.querySelector('.extPrice');
      extPriceCell.innerText = '$' + (price * quantity).toFixed(2);

      calculateTotal();
    }
  });

  function calculateTotal() {
    let total = 0;
    const extPrices = document.querySelectorAll('.extPrice');
    extPrices.forEach(cell => {
      const value = parseFloat(cell.innerText.replace('$', '')) || 0;
      total += value;
    });
    document.getElementById('total').innerText = '$' + total.toFixed(2);
  }

  // Initialize EXT Prices and Total on page load
  window.addEventListener('DOMContentLoaded', () => {
    const inputs = table.querySelectorAll('input[type="number"]');
    inputs.forEach(input => {
      const row = input.closest('tr');
      const priceText = row.querySelector('td:nth-child(4)').innerText.replace('$', '');
      const price = parseFloat(priceText) || 0;
      const quantity = parseInt(input.value) || 0;
      const extPriceCell = row.querySelector('.extPrice');
      extPriceCell.innerText = '$' + (price * quantity).toFixed(2);
    });
    calculateTotal();
  });
</script>

</body>
</html>
